# MedRobo

**Autonomous Medicine distrbution rover with QR detection**

This was my final year project in my Under Graduate degree as a Robotics & Automation engineer.
The project was aimed to substitute the role of medical staff for medicine distribution to the patients potentially having affected by CoVid-19 virus. But the robot can be also used for general patients and can reduce human staff from coming in direct contact with the patients.

**Synopsis**

So, basically this rover has its own server where the doctor enters the patient name, disease, door no, bed no and the medicines needed to be given to the particular patient. Once the details are feeded in the database the robot starts distrbuting the medicines. The camera attached in the front is used to scan QR code which is attached on the walls of the hospital to navigate across various rooms and paths. The robot navigates its way to the patient bed and dispenses the assigned medicines to the patients. The process continues until all patients have recived their medicine and after that the rover returns back to its initial position/ start position.

**Materials required :**
* Arduino Uno (or any micro-controller)
* Raspberry Pi (3 or 4 with atlest 4GB ram or can also use any similar spec micro-processor/computer)
* 8 DC motors (4 for rover & 4 for 4 types of medicine)
* 3 motor driver (1 for rover and 2 for medicine distribution system)
* 12V DC battery
* Connecting wires
* Web cam / any compatible camera with raspberry pi
* Coil wire
* Sun Board

**Material Explaination :**

**Raspberry Pi :** This is the main brain of the rover and it basically controls the every action of the rover. It recives input from camera and processes it and sends commands to the motor drivers via the arduino uno.

**Arduino Uno :** The uno is used to control the all the motors in the robot. The reason behind using arduino is that the raspberry pi gets overloaded by processing the camera input and does the path planning and the server is hosted in the pi itself so, to reduce the load from the raspberry pi i am using arduino. The raspberry pi and arduino communicates via the USB cable using serial communication.

**Motors and motor driver :** The rover base has 4 motors to go front, back and turn/rotate left, right. One motor driver is to control the base 4 motors of the rover and 4 motors to control the medicine dispensing system.

**Medicine Distribution System**

To better understand the mechanism of distributing medicines which have i used, take the reference of a vending machine where a big coil is rotated by a motor and in the coil slots chips/chocolate is placed. For every 360 deg turn one item form the corresponding slot falls off. We used the exact same mechanism and replaced the chips with sealed medicine strip divided into individual parts.

**Path Planning / Navigation :**

So, during the time we built this system we had a few constrains, i.e we had limited budget to purchase a lidar sensor so we opted to go with any other method and secondly most of our classmates we working on a very similar concept of autonomus rover using lidar so we eventually removed the idea of making a lidar based rover. Now after this we had to find a solution for some other problem like navigation and localization in any given environment. The solution i came up is by, pre-mapping the given environment manually and feed the disired data in the system (and it was a bit tough but we had no other option) so, once we give the pre-buit map of the hospital layout , we then set up QR codes (generated by the file /med/medrobo/qrgen.py) on the end of every straight path. So when we press start/run the code we can verify that the rover is moving in the correct/desired direction.

**Software/python dependencies required:**
  * Django
  * open-cv
  * pyzbar
  * time
  * py-serial
  * sqlite3
  * pyautogui
  * rpi-gpio
  
* The [robot_v2.1.py](https://github.com/Mitheshjn/MedRobo/blob/main/robot_v2.1.py) is the main code to control the robot and process the given information.
* The [medrobo.ino](https://github.com/Mitheshjn/MedRobo/blob/main/medrobo.ino) is used to control the arduino which in turn controls the motors.
* The [qr-gen.py](https://github.com/Mitheshjn/MedRobo/blob/main/med/medrobo/qr-gen.py) is used to genrate qr-code.
* The [qr-read.py](https://github.com/Mitheshjn/MedRobo/blob/main/med/medrobo/qr-read.py) is used to read qr-code data.
>A few pre-generated images are in the [New folder](https://github.com/Mitheshjn/MedRobo/blob/main/New).
* The [manage.py](https://github.com/Mitheshjn/MedRobo/blob/main/med/medrobo/manage.py) is use to start the GUI web server.

To use this project, copy this project using the command :
```
git clone https://github.com/Mitheshjn/MedRobo.git
```
Once done open the directory and navigate to manage.py in the /med/medrobo folder and enter the command :
```
python3 manage.py runserver
```
Once the server is up and running, open your browser and navigate to 127.0.0.1:8000/med
>NOTE : If you are accessing the webpage on the device which is hosting the web server then enter the above mentioned IP address. If not the replace it with the device IP address (it should look something like 192.168.xx.xx:8000/med). **To access the webpage your browser and host device should be on the same local network.**

You can enter the paitent details and see them or delete them in the webpage. Once after filling the details run the command to start the robot.
```
python3 robot_v2.1.py
```

>NOTE : Make sure you are in the right directory before executing the commands

And thats it, the robot does its job and returns to home postion.

If you want to modify the path use the file [robot_v2.1.py](https://github.com/Mitheshjn/MedRobo/blob/main/robot_v2.1.py).
